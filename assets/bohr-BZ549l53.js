import"./style-C8pZEPYV.js";class I{canvas;ctx;width;height;n=3;targetN=null;transitionProgress=0;electronAngle=0;electronSpeed=.02;photons=[];baseRadiusScale=30;constructor(t){this.canvas=t;const e=t.getContext("2d");if(!e)throw new Error("2D context not found");this.ctx=e,this.width=t.width,this.height=t.height,this.handleResize(),window.addEventListener("resize",()=>this.handleResize()),this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}handleResize(){this.canvas.parentElement&&(this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.baseRadiusScale=Math.min(this.width,this.height)/20)}getRadius(t){return this.baseRadiusScale*(t*1.5)}transitionTo(t){this.targetN===null&&t!==this.n&&(t<this.n&&this.emitPhoton(this.n,t),t>this.n,this.targetN=t,this.transitionProgress=0)}emitPhoton(t,e){let i="#FFFFFF";e===1?i="#AA00FF":e===2?t===3?i="#F44336":t===4?i="#03A9F4":t===5?i="#3F51B5":i="#673AB7":e===3&&(i="#D32F2F");const n=this.getRadius(this.n),h=this.width/2+Math.cos(this.electronAngle)*n,s=this.height/2+Math.sin(this.electronAngle)*n,c=Math.atan2(s-this.height/2,h-this.width/2);this.photons.push({x:h,y:s,vx:Math.cos(c)*5,vy:Math.sin(c)*5,color:i,life:100,waviness:0})}update(){let t=this.n;if(this.targetN!==null){this.transitionProgress+=.02;const e=this.easeInOutQuad(this.transitionProgress);t=this.n+(this.targetN-this.n)*e,this.transitionProgress>=1&&(this.n=this.targetN,this.targetN=null,this.transitionProgress=0)}this.electronAngle+=.05/t;for(let e=this.photons.length-1;e>=0;e--){const i=this.photons[e];i.x+=i.vx,i.y+=i.vy,i.life--,i.waviness+=.5,i.life<=0&&this.photons.splice(e,1)}}draw(){this.ctx.clearRect(0,0,this.width,this.height);const t=this.width/2,e=this.height/2;for(let s=1;s<=6;s++){const c=this.getRadius(s);this.ctx.beginPath(),this.ctx.strokeStyle="rgba(0,0,0,0.1)",(s===this.targetN||s===this.n)&&(this.ctx.strokeStyle="rgba(0,0,0,0.3)"),this.ctx.lineWidth=1,this.ctx.arc(t,e,c,0,Math.PI*2),this.ctx.stroke(),this.ctx.fillStyle="#aaa",this.ctx.font="10px Arial",this.ctx.fillText(`n=${s}`,t+5,e-c)}this.ctx.beginPath(),this.ctx.fillStyle="#ff1744",this.ctx.arc(t,e,6,0,Math.PI*2),this.ctx.fill(),this.ctx.shadowColor="#ff1744",this.ctx.shadowBlur=10;let i=this.getRadius(this.n);if(this.targetN!==null){const s=this.easeInOutQuad(this.transitionProgress),c=this.getRadius(this.n),r=this.getRadius(this.targetN);i=c+(r-c)*s}const n=t+Math.cos(this.electronAngle)*i,h=e+Math.sin(this.electronAngle)*i;this.ctx.beginPath(),this.ctx.fillStyle="#00e5ff",this.ctx.shadowColor="#00e5ff",this.ctx.shadowBlur=15,this.ctx.arc(n,h,5,0,Math.PI*2),this.ctx.fill(),this.ctx.shadowBlur=0,this.photons.forEach(s=>{this.ctx.beginPath(),this.ctx.strokeStyle=s.color,this.ctx.lineWidth=2,this.ctx.shadowColor=s.color,this.ctx.shadowBlur=5;const c=Math.atan2(s.vy,s.vx),r=20;this.ctx.save(),this.ctx.translate(s.x,s.y),this.ctx.rotate(c),this.ctx.moveTo(-r/2,0);for(let l=-r/2;l<=r/2;l+=2){const u=Math.sin((l+s.waviness*5)*.5)*5;this.ctx.lineTo(l,u)}this.ctx.stroke(),this.ctx.restore(),this.ctx.shadowBlur=0})}loop(){this.update(),this.draw(),requestAnimationFrame(this.loop)}easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}}class b{canvas;ctx;width;height;currentN=3;targetN=null;levels=[1,2,3,4,5,6];constructor(t){this.canvas=t;const e=t.getContext("2d");if(!e)throw new Error("2D context not found");this.ctx=e,this.width=t.width,this.height=t.height,this.handleResize(),window.addEventListener("resize",()=>this.handleResize())}handleResize(){this.canvas.parentElement&&(this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight||200,this.width=this.canvas.width,this.height=this.canvas.height,this.draw())}getY(t){const e=-1/(t*t),i=-1,h=(e-i)/(0-i);return this.height-30-h*(this.height-60)}updateState(t,e){this.currentN=t,this.targetN=e,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height);const t=50,e=this.width-70;this.ctx.font="12px Arial",this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.levels.forEach(n=>{const h=this.getY(n);this.ctx.beginPath(),this.ctx.strokeStyle="#ccc",this.ctx.lineWidth=1,this.ctx.moveTo(t,h),this.ctx.lineTo(t+e,h),this.ctx.stroke(),this.ctx.fillStyle="#666",this.ctx.fillText(`n=${n}`,t-5,h);const s=-13.6/(n*n);this.ctx.fillText(`${s.toFixed(2)} eV`,this.width-5,h)});const i=this.getY(this.currentN);if(this.ctx.beginPath(),this.ctx.fillStyle="#2196F3",this.ctx.arc(t+e/2,i,6,0,Math.PI*2),this.ctx.fill(),this.targetN!==null){const n=this.getY(this.currentN),h=this.getY(this.targetN);this.ctx.beginPath(),this.ctx.strokeStyle=this.targetN<this.currentN?"#F44336":"#4CAF50",this.ctx.lineWidth=2,this.ctx.moveTo(t+e/2+20,n),this.ctx.lineTo(t+e/2+20,h),this.ctx.stroke()}}}document.addEventListener("DOMContentLoaded",()=>{const g=document.getElementById("bohr-canvas"),t=document.getElementById("energy-level-canvas");if(!g||!t)throw new Error("Canvas elements not found");const e=new I(g),i=new b(t),n=document.getElementById("initial-n"),h=document.getElementById("final-n"),s=document.getElementById("initial-n-val"),c=document.getElementById("final-n-val"),r=document.getElementById("transition-btn"),l=document.getElementById("delta-e"),u=document.getElementById("photon-wl"),w=document.getElementById("series-name"),m=(o,a)=>{const y=-13.6/(o*o),p=-13.6/(a*a),v=Math.abs(p-y),E=1240/v;let d="Unknown";const x=Math.min(o,a);x===1?d="Lyman (UV)":x===2?d="Balmer (Visible)":x===3?d="Paschen (IR)":x===4?d="Brackett (IR)":x===5&&(d="Pfund (IR)"),l&&(l.textContent=`${v.toFixed(2)} eV`),u&&(u.textContent=`${E.toFixed(0)} nm`),w&&(w.textContent=d)},f=()=>{const o=parseInt(n.value),a=parseInt(h.value);s&&(s.textContent=`n = ${o}`),c&&(c.textContent=`n = ${a}`),m(o,a),o===a?(r.disabled=!0,r.style.opacity="0.5",r.textContent="Same Level"):(r.disabled=!1,r.style.opacity="1",r.textContent=o>a?"Emit Photon":"Absorb Photon")};e.n=parseInt(n.value),i.currentN=parseInt(n.value),i.draw(),n.addEventListener("input",()=>{f();const o=parseInt(n.value);e.n=o,i.currentN=o,i.draw()}),h.addEventListener("input",f),r.addEventListener("click",()=>{const o=parseInt(n.value),a=parseInt(h.value);o!==a&&(e.transitionTo(a),i.targetN=a,i.draw(),m(o,a),setTimeout(()=>{n.value=a.toString(),f(),i.currentN=a,i.targetN=null,i.draw()},2e3))}),f()});
