import"./style-CuToGdDJ.js";class E{canvas;ctx;width;height;n=3;targetN=null;transitionProgress=0;waitingForAbsorption=!1;electronAngle=0;electronSpeed=.035;photons=[];baseRadiusScale=30;constructor(t){this.canvas=t;const s=t.getContext("2d");if(!s)throw new Error("2D context not found");this.ctx=s,this.width=t.width,this.height=t.height,this.handleResize(),window.addEventListener("resize",()=>this.handleResize()),this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}handleResize(){this.canvas.parentElement&&(this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight,this.width=this.canvas.width,this.height=this.canvas.height,this.baseRadiusScale=Math.min(this.width,this.height)/20)}getRadius(t){return this.baseRadiusScale*(t*1.5)}transitionTo(t){this.targetN!==null||this.waitingForAbsorption||t!==this.n&&(this.targetN=t,t<this.n&&(this.emitPhoton(this.n,t),this.transitionProgress=0),t>this.n&&(this.absorbPhoton(this.n,t),this.waitingForAbsorption=!0,this.transitionProgress=0))}getPhotonColor(t,s){const i=Math.min(t,s),e=Math.max(t,s);return i===1?"#AA00FF":i===2?e===3?"#F44336":e===4?"#03A9F4":e===5?"#3F51B5":"#673AB7":i===3?"#D32F2F":"#FFFFFF"}absorbPhoton(t,s){const i=this.getPhotonColor(t,s),e=this.getRadius(t),h=Math.max(this.width,this.height)/1.5,n=3.5,a=(h-e)/n,u=.035/t,d=this.electronAngle+u*a,l=this.width/2+Math.cos(d)*h,x=this.height/2+Math.sin(d)*h,g=this.width/2+Math.cos(d)*e,r=this.height/2+Math.sin(d)*e,o=g-l,w=r-x,v=Math.sqrt(o*o+w*w);this.photons.push({x:l,y:x,vx:o/v*n,vy:w/v*n,color:i,life:1e3,totalLife:1e3,waviness:0,type:"absorption"})}emitPhoton(t,s){const i=this.getPhotonColor(t,s),e=this.getRadius(this.n),h=this.width/2+Math.cos(this.electronAngle)*e,n=this.height/2+Math.sin(this.electronAngle)*e,c=Math.atan2(n-this.height/2,h-this.width/2),a=3.5;this.photons.push({x:h,y:n,vx:Math.cos(c)*a,vy:Math.sin(c)*a,color:i,life:200,totalLife:200,waviness:0,type:"emission"})}update(){let t=this.n;if(this.targetN!==null&&!this.waitingForAbsorption){this.transitionProgress+=.015;const s=this.easeInOutQuad(this.transitionProgress);t=this.n+(this.targetN-this.n)*s,this.transitionProgress>=1&&(this.n=this.targetN,this.targetN=null,this.transitionProgress=0)}this.electronAngle+=.035/t;for(let s=this.photons.length-1;s>=0;s--){const i=this.photons[s];if(i.x+=i.vx,i.y+=i.vy,i.waviness+=.35,i.type==="emission")i.life--,i.life<=0&&this.photons.splice(s,1);else if(i.type==="absorption"){const e=i.x-this.width/2,h=i.y-this.height/2,n=Math.sqrt(e*e+h*h),c=this.getRadius(this.n);n<=c&&(this.waitingForAbsorption=!1,this.photons.splice(s,1))}}}draw(){this.ctx.clearRect(0,0,this.width,this.height);const t=this.width/2,s=this.height/2;for(let n=1;n<=6;n++){const c=this.getRadius(n);this.ctx.beginPath(),this.ctx.strokeStyle="rgba(0, 0, 0, 0.1)",(n===this.targetN||n===this.n)&&(this.ctx.strokeStyle="rgba(0, 0, 0, 0.3)"),this.waitingForAbsorption&&n===this.targetN&&(this.ctx.strokeStyle="rgba(0, 0, 0, 0.5)"),this.ctx.lineWidth=1,this.ctx.arc(t,s,c,0,Math.PI*2),this.ctx.stroke(),this.ctx.fillStyle="#666",this.ctx.font="10px Arial",this.ctx.fillText(`n=${n}`,t+5,s-c)}this.ctx.beginPath(),this.ctx.fillStyle="#ff1744",this.ctx.arc(t,s,6,0,Math.PI*2),this.ctx.fill(),this.ctx.shadowColor="#ff1744",this.ctx.shadowBlur=10;let i=this.getRadius(this.n);if(this.targetN!==null&&!this.waitingForAbsorption){const n=this.easeInOutQuad(this.transitionProgress),c=this.getRadius(this.n),a=this.getRadius(this.targetN);i=c+(a-c)*n}const e=t+Math.cos(this.electronAngle)*i,h=s+Math.sin(this.electronAngle)*i;this.ctx.beginPath(),this.ctx.fillStyle="#00e5ff",this.ctx.shadowColor="#00e5ff",this.ctx.shadowBlur=15,this.ctx.arc(e,h,5,0,Math.PI*2),this.ctx.fill(),this.ctx.shadowBlur=0,this.photons.forEach(n=>{this.ctx.beginPath(),this.ctx.strokeStyle=n.color,this.ctx.lineWidth=3,this.ctx.shadowColor=n.color,this.ctx.shadowBlur=8,this.ctx.lineCap="round";const c=Math.atan2(n.vy,n.vx),a=40,u=.4,d=6;this.ctx.save(),this.ctx.translate(n.x,n.y),this.ctx.rotate(c),this.ctx.moveTo(-a/2,0);for(let l=-a/2;l<=a/2;l+=2){const x=n.waviness,g=Math.abs(l),r=Math.max(0,1-g/(a/2)),o=Math.sin(l*u-x)*d*r;this.ctx.lineTo(l,o)}this.ctx.stroke(),this.ctx.restore(),this.ctx.shadowBlur=0})}loop(){this.update(),this.draw(),requestAnimationFrame(this.loop)}easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t}}class I{canvas;ctx;width;height;currentN=3;targetN=null;levels=[1,2,3,4,5,6];constructor(t){this.canvas=t;const s=t.getContext("2d");if(!s)throw new Error("2D context not found");this.ctx=s,this.width=t.width,this.height=t.height,this.handleResize(),window.addEventListener("resize",()=>this.handleResize())}handleResize(){this.canvas.parentElement&&(this.canvas.width=this.canvas.parentElement.clientWidth,this.canvas.height=this.canvas.parentElement.clientHeight||200,this.width=this.canvas.width,this.height=this.canvas.height,this.draw())}getY(t){const s=-1/(t*t),i=-1,h=(s-i)/(0-i);return this.height-30-h*(this.height-60)}updateState(t,s){this.currentN=t,this.targetN=s,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height);const t=50,s=this.width-70;this.ctx.font="12px Arial",this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.levels.forEach(e=>{const h=this.getY(e);this.ctx.beginPath(),this.ctx.strokeStyle="#ccc",this.ctx.lineWidth=1,this.ctx.moveTo(t,h),this.ctx.lineTo(t+s,h),this.ctx.stroke(),this.ctx.fillStyle="#666",this.ctx.fillText(`n=${e}`,t-5,h);const n=-13.6/(e*e);this.ctx.fillText(`${n.toFixed(2)} eV`,this.width-5,h)});const i=this.getY(this.currentN);if(this.ctx.beginPath(),this.ctx.fillStyle="#2196F3",this.ctx.arc(t+s/2,i,6,0,Math.PI*2),this.ctx.fill(),this.targetN!==null){const e=this.getY(this.currentN),h=this.getY(this.targetN);this.ctx.beginPath(),this.ctx.strokeStyle=this.targetN<this.currentN?"#F44336":"#4CAF50",this.ctx.lineWidth=2,this.ctx.moveTo(t+s/2+20,e),this.ctx.lineTo(t+s/2+20,h),this.ctx.stroke()}}}document.addEventListener("DOMContentLoaded",()=>{const p=document.getElementById("bohr-canvas"),t=document.getElementById("energy-level-canvas");if(!p||!t)throw new Error("Canvas elements not found");const s=new E(p),i=new I(t),e=document.getElementById("initial-n"),h=document.getElementById("final-n"),n=document.getElementById("initial-n-val"),c=document.getElementById("final-n-val"),a=document.getElementById("transition-btn"),u=document.getElementById("delta-e"),d=document.getElementById("photon-wl"),l=document.getElementById("series-name"),x=(r,o)=>{const w=-13.6/(r*r),v=-13.6/(o*o),y=Math.abs(v-w),b=1240/y;let f="Unknown";const m=Math.min(r,o);m===1?f="Lyman (UV)":m===2?f="Balmer (Visible)":m===3?f="Paschen (IR)":m===4?f="Brackett (IR)":m===5&&(f="Pfund (IR)"),u&&(u.textContent=`${y.toFixed(2)} eV`),d&&(d.textContent=`${b.toFixed(0)} nm`),l&&(l.textContent=f)},g=()=>{const r=parseInt(e.value),o=parseInt(h.value);n&&(n.textContent=`n = ${r}`),c&&(c.textContent=`n = ${o}`),x(r,o),r===o?(a.disabled=!0,a.style.opacity="0.5",a.textContent="Same Level"):(a.disabled=!1,a.style.opacity="1",a.textContent=r>o?"Emit Photon":"Absorb Photon")};s.n=parseInt(e.value),i.currentN=parseInt(e.value),i.draw(),e.addEventListener("input",()=>{g();const r=parseInt(e.value);s.n=r,i.currentN=r,i.draw()}),h.addEventListener("input",g),a.addEventListener("click",()=>{const r=parseInt(e.value),o=parseInt(h.value);r!==o&&(s.transitionTo(o),i.targetN=o,i.draw(),x(r,o),setTimeout(()=>{e.value=o.toString(),g(),i.currentN=o,i.targetN=null,i.draw()},2e3))}),g()});
